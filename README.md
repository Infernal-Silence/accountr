# accountr
Приложение для фиксирования доходов и расходов пользователей, чтобы пользователи могли видеть отчеты по своим личным финансам.

### [Техническое задание](https://docs.google.com/document/d/12RieA2g_HA7tVc9n1DKBoY3a4xHsPNBrY3W7v6yQfGQ/edit)

### Команда
**Red studio:**
+ Infernal-Silence - Lina Markes
+ konons - Konstantin Novoselov
+ AlexandrGrents - Alexandr Grents

### Инструкция по запуску
1. `$ poetry env use <путь к python>`
2. `$ poetry install`
3. Создать файл `.env` по образцу `.env.example`:
    ```
    FLASK_APP=accountr.app:create_app
    FLASK_ENV=development
    DB_CONNECTION=<полный путь к файлу базы данных и имя файла с расширением .db>
    SECRET_KEY=<секретный ключ>
    ```
   ВНИМАНИЕ: перед вводом в промышленную эксплуатацию удалить переменную FLASK_ENV!
4. `$ poetry shell`
5. На windows (cmd): `$ set PYTHONPATH=./src`

   На windows (powershell): `$ $env:PYTHONPATH="./src"`

   На unix: `$ export PYTHONPATH=./src`
6. Если не создана база данных: `$ python database_create.py`. 
   Файл базы данных будет создан в каталоге, как указано в переменной DB_CONNECTION. 
   
   Типы операций будут добавлены в таблицу types автоматически:
   + income, id = 1 - приход
   + expenditure, id = 2 - расход 
7. `$ flask run`

### Структура проекта
+ /doc - документация по проекту (подробнее см. файл readme в каталоге)
+ /src - код пакета accountr
+ /test - тестовые коллекции для postman

### Порядок тестирования с использованием тестовых коллекций postman
1. Удалите файл базы данных *.db, если он уже создан
2. Выполните п.6 из инструкции по запуску
3. Импортируйте файлы из каталога /test в postman
4. Выполните команду run для коллекций в следующем порядке:
+ **Users** (создает пользователей и проверяет работу с пользователями) 
  
  **Результат:** созданы 2 пользователя user1 и user2
+ **Categories** (создает категории и проверяет работу с категориями)
  
  **Результат:** одна категория пользователя user1 (еда) и две категории у user2 (еда->пивко)
+ **Operations** (создает операции и проверяет работу с ними)
  
  **Результат:** user1 имеет 1 операцию с пустой категорией, user2 имеет одну операцию с категорией id=6
+ **Operation types** (проверяет работу с типами операций)
  
  **Результат:** все тесты успешны
+ **Report** (проверяет работу с отчетом по операциям)
  
  **Результат:** все тесты успешны, 

ВНИМАНИЕ: при выполнении коллекций в другой последовательности корректность проверок не гарантируется! 
Все тесты должны отработать без ошибок.


